(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1e254ca"],{"43c1":function(t,e,i){"use strict";i.d(e,"h",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"e",(function(){return o})),i.d(e,"d",(function(){return l})),i.d(e,"a",(function(){return s})),i.d(e,"g",(function(){return c})),i.d(e,"f",(function(){return u})),i.d(e,"i",(function(){return d})),i.d(e,"b",(function(){return m}));i("55dd");var n=i("66df"),a=function(t){return n["a"].request({url:"/api/data/article",data:t,method:"post"})},r=function(t){return n["a"].request({url:"/api/data/article/search/column-property?value="+t,method:"get"})},o=function(t){var e="";return e=t.title&&t.title.length>0?"/api/data/article/search/title_column-property_page?title=%25"+t.title+"%25&columnProperty="+t.columnProperty+"&page="+t.page+"&size="+t.size+"&sort="+t.sort:"/api/data/article/search/column-property_page?columnProperty="+t.columnProperty+"&page="+t.page+"&size="+t.size+"&sort="+t.sort,n["a"].request({url:e,method:"get"})},l=function(t){var e="";return e=t.title&&t.title.length>0?"/api/data/article/search/column-id_title_page?title=%25"+t.title+"%25&columnId="+t.columnId+"&page="+t.page+"&size="+t.size+"&sort="+t.sort:"/api/data/article/search/column-id_page?columnId="+t.columnId+"&page="+t.page+"&size="+t.size+"&sort="+t.sort,n["a"].request({url:e,method:"get"})},s=function(t){return n["a"].request({url:"/api/data/article/"+t,method:"delete"})},c=function(t){return n["a"].request({url:"/api/data/column/search/top-column?property="+t,method:"get"})},u=function(t){return n["a"].request({url:"/api/data/column/"+t+"/children",method:"get"})},d=function(t){return n["a"].request({url:"/api/data/column",data:t,method:"post"})},m=function(t){return n["a"].request({url:"/api/data/column/"+t,method:"delete"})}},"5d1e":function(t,e,i){},a23a:function(t,e,i){"use strict";i("5d1e")},fac6:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("Card",{staticStyle:{width:"430px",height:"400px",margin:"0 auto"}},[i("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n            上传图片\n        ")]),i("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){return e.preventDefault(),t.handleSaveImg.apply(null,arguments)}},slot:"extra"},[i("Icon",{attrs:{type:"ios-loop-strong"}}),t._v("\n            保存\n        ")],1),i("a",{attrs:{slot:"extra",href:"#"},on:{click:function(e){return e.preventDefault(),t.handleClear.apply(null,arguments)}},slot:"extra"},[i("Icon",{attrs:{type:"ios-loop-strong"}}),t._v("\n            清空\n        ")],1),i("div",{staticStyle:{margin:"0 auto 20px auto","text-align":"center"}},[i("Upload",{ref:"upload",staticStyle:{width:"198px",height:"198px",margin:"0 auto"},attrs:{"show-upload-list":!1,type:"drag","on-success":t.handleSuccess,format:["jpg","jpeg","png"],"max-size":2048,"on-format-error":t.handleFormatError,"on-exceeded-size":t.handleMaxSize,"before-upload":t.handleBeforeUpload,action:"/api/attachment/upload"}},[i("div",{staticStyle:{width:"198px",height:"198px","line-height":"198px"}},[i("Icon",{directives:[{name:"show",rawName:"v-show",value:0==t.imgForm.imgUrl.length,expression:"imgForm.imgUrl.length == 0"}],attrs:{type:"ios-camera",size:"60"}}),i("img",{staticStyle:{"max-width":"100%","max-height":"100%"},attrs:{src:t.imgForm.imgUrl}})],1)])],1),i("Form",{attrs:{model:t.imgForm,"label-position":"right","label-width":60}},[i("FormItem",{attrs:{label:"标题"}},[i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入标题..."},model:{value:t.imgForm.title,callback:function(e){t.$set(t.imgForm,"title",e)},expression:"imgForm.title"}})],1),i("FormItem",{attrs:{label:"连接"}},[i("Input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入连接地址..."},model:{value:t.imgForm.url,callback:function(e){t.$set(t.imgForm,"url",e)},expression:"imgForm.url"}})],1)],1)],1),i("div",{staticClass:"slideImageList"},[i("div",{staticClass:"cardTitle"},[i("Icon",{attrs:{type:"ios-film-outline"}}),t._v("轮播图列表")],1),i("div",{staticStyle:{"margin-top":"5px"}},t._l(t.slideImageList,(function(e,n){return i("div",{key:n,staticClass:"demo-upload-list"},[i("img",{attrs:{src:"/api/attachment/get/"+e.iconId}}),i("div",{staticClass:"demo-upload-list-cover"},[i("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(i){return t.handleView(e.iconId)}}}),i("Icon",{attrs:{type:"ios-create-outline"},nativeOn:{click:function(i){return t.handleEdit(e)}}}),i("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(i){return t.handleRemove(e)}}})],1)])})),0)]),i("Modal",{attrs:{title:"预览大图"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?i("img",{staticStyle:{width:"100%"},attrs:{src:"/api/attachment/get/"+t.viewId}}):t._e()])],1)},a=[],r=(i("7f7f"),i("43c1")),o=i("e069"),l={data:function(){return{slideImageList:[],uploadList:[],visible:!1,viewId:null,imgForm:{id:null,columnProperty:null,columnId:null,iconId:null,imgUrl:"",title:"",url:""}}},methods:{handleView:function(t){this.viewId=t,this.visible=!0},handleEdit:function(t){this.imgForm.id=t.id,this.imgForm.iconId=t.iconId,this.imgForm.imgUrl="/api/attachment/get/"+t.iconId,this.imgForm.title=t.title,this.imgForm.url=t.url},handleRemove:function(t){var e=this;o["Modal"].confirm({title:"确认删除吗？",onOk:function(){Object(r["a"])(t.id).then((function(t){e.handleClear(),e.loadAllSlideImages(),e.$Message.info("删除成功")}))},onCancel:function(){}})},handleSuccess:function(t,e){t&&t.rows&&t.rows.length>0&&(this.imgForm.imgUrl="/api/attachment/get/"+t.rows[0].id,this.imgForm.iconId=t.rows[0].id)},handleFormatError:function(t){this.$Notice.warning({title:"文件格式不正确",desc:"选中文件 "+t.name+" 的格式错误, 请选择 jpg 或 png 文件."})},handleMaxSize:function(t){this.$Notice.warning({title:"超出文件大小限制",desc:"选中文件  "+t.name+" 太大, 不应该超过 2M."})},handleBeforeUpload:function(){var t=!0;return t},handleClear:function(){this.imgForm.id=null,this.imgForm.iconId=null,this.imgForm.imgUrl="",this.imgForm.title="",this.imgForm.url=""},handleSaveImg:function(){var t=this;null!=this.imgForm.iconId?Object(r["h"])(this.imgForm).then((function(e){t.handleClear(),t.loadAllSlideImages(),t.$Message.info("保存成功")})):this.$Notice.warning({title:"没有上传图片",desc:"请首先上传图片后再保存."})},loadAllSlideImages:function(){var t=this;Object(r["c"])(2).then((function(e){t.slideImageList=e.data._embedded.cmsArticles}))}},mounted:function(){this.imgForm.columnProperty=this.$config.columnProperty.SLIDE_IMAGE,this.imgForm.columnId=this.$config.columnProperty.SLIDE_IMAGE,this.loadAllSlideImages()}},s=l,c=(i("a23a"),i("2877")),u=Object(c["a"])(s,n,a,!1,null,null,null);e["default"]=u.exports}}]);